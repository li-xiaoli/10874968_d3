d3.select("section").append("svg");for(var dataset=[],dataMean=[],days=[],i=0;4>=i;i++)dataMean[i]=[0,0,0,0,0,0,0,0,0,0,0,0],days[i]=[0,0,0,0,0,0,0,0,0,0,0,0];var converting=function(a){return"-"===a[0]?-1*parseInt(a.substring(1)):parseInt(a)},fixing=function(a){for(var e=0;e<a.length;e++){console.log(a[e]),a[e].temperature=converting(a[e].temperature),a[e].month=converting(a[e].month);for(var t=2010;2014>=t;t++)if(Number(a[e].year)===t)switch(a[e].month){case 1:dataMean[t-2010][0]+=a[e].temperature,days[t-2010][0]++;break;case 2:dataMean[t-2010][1]+=a[e].temperature,days[t-2010][1]++;break;case 3:dataMean[t-2010][2]+=a[e].temperature,days[t-2010][2]++;break;case 4:dataMean[t-2010][3]+=a[e].temperature,days[t-2010][3]++;break;case 5:dataMean[t-2010][4]+=a[e].temperature,days[t-2010][4]++;break;case 6:dataMean[t-2010][5]+=a[e].temperature,days[t-2010][5]++;break;case 7:dataMean[t-2010][6]+=a[e].temperature,days[t-2010][6]++;break;case 8:dataMean[t-2010][7]+=a[e].temperature,days[t-2010][7]++;break;case 9:dataMean[t-2010][8]+=a[e].temperature,days[t-2010][8]++;break;case 10:dataMean[t-2010][9]+=a[e].temperature,days[t-2010][9]++;break;case 11:dataMean[t-2010][10]+=a[e].temperature,days[t-2010][10]++;break;case 12:dataMean[t-2010][11]+=a[e].temperature,days[t-2010][11]++;break;default:console.log("-----------------------------------13")}}for(var t=2010;2014>=t;t++)for(var r=1;12>=r;r++)dataMean[t-2010][r-1]=Math.round(100*dataMean[t-2010][r-1]/days[t-2010][r-1])/100};d3.csv("meteo.csv",function(a){console.table(a),dataset=a,fixing(dataset),console.log(dataMean)});